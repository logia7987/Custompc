{% extends 'manager/manager_home.html' %}

{% block manager %}
<!--todo pagenation 추가하기, 타입별 정렬 고려-->
<h1>제품목록</h1>
<a href="{% url 'manager_hardware_new' %}">제품등록</a>
{% verbatim %}
<div ng-app="myApp" ng-controller="namesCtrl">
    <p><input type="text" ng-model="hwsearch"></p>
    <table>
        <tr>
            <th ng-click="orderByMe('pk')">ID</th>
            <th ng-click="orderByMe('fields.name')">품명</th>
            <th ng-click="orderByMe('fields.hardware_kind')">종류</th>
            <th>삭제</th>
        </tr>
        <tr ng-repeat="x in names|orderBy:myOrderBy|filter:hwsearch">
            <td>{{ x.pk }}</td>
            <td><a href="/manager/hardware/{{ x.pk }}/edit">{{x.fields.name}}</a></td>
            <td>{{x.fields.hardware_kind}}</td>
            <td><a href="/manager/hardware/{{ x.pk }}/remove"><button>삭제</button></a></td>
        </tr>
    </table>
</div>
{% endverbatim %}
<p>*제품이름을 클릭하면 수정할 수 있습니다.</p>
<script>
    var app = angular.module('myApp', []);
    app.controller('namesCtrl', function($scope, $http){
        $http.get('{% url "get_data" %}').then(function (response){
            $scope.names = JSON.parse(response.data.hardware);
            $scope.orderByMe = function(x) {
                $scope.myOrderBy = x;
            };
        });
    });
</script>
{% endblock %}